<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Analyse</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        h1 {
            text-align: center;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">Accueil</a>
        <a class="navbar-brand" href="/analyse">Analyse</a>
        <a class="navbar-brand" href="/prediction">Pr√©diction</a>
    </nav>

    <h1>Analyse</h1>
    
    <canvas id="{{ chart1_id }}" width="500" height="500" class="mx-auto"></canvas>
    <div class="text-center">
        <button id="show-graph1">Afficher le graphique 1</button>
    </div>
    
    <canvas id="{{ chart2_id }}" width="500" height="500" class="mx-auto"></canvas>
    <div class="text-center">
        <button id="show-graph2">Afficher le graphique 2</button>
    </div>
    
    <script>
        var chartData = {{ data | tojson }};
        var isOpen1 = false;
        var isOpen2 = false;
    
        // Button for chart 1
        var showGraphButton1 = document.getElementById('show-graph1');
        var chartData1 = chartData.graph1.data;
        var chartOptions1 = chartData.graph1.options;
        chartOptions1.responsive = false;
        var ctx1 = document.getElementById('{{ chart1_id }}').getContext('2d');
        var myChart1 = null;
        
        showGraphButton1.addEventListener('click', function() {
            if (isOpen1) {
                myChart1.destroy();
                isOpen1 = false;
            } else {
                myChart1 = new Chart(ctx1, {
                    type: 'bar',
                    data: chartData1,
                    options: chartOptions1
                });
                isOpen1 = true;
            }
        });
    
        // Button for chart 2
        var showGraphButton2 = document.getElementById('show-graph2');
        var chartData2 = chartData.graph2.data;
        var chartOptions2 = chartData.graph2.options;
        chartOptions2.responsive = false;
        var ctx2 = document.getElementById('{{ chart2_id }}').getContext('2d');
        var myChart2 = null;
        
        showGraphButton2.addEventListener('click', function() {
            if (isOpen2) {
                myChart2.destroy();
                isOpen2 = false;
            } else {
                myChart2 = new Chart(ctx2, {
                    type: 'doughnut',
                    data: chartData2,
                    options: chartOptions2
                });
                isOpen2 = true;
            }
        });
    </script>
    
</body>
</html>
