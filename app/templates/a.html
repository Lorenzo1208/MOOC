<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Analyse</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        h1 {
            text-align: center;
            margin-top: 20px; /* ajustez la valeur en fonction de vos besoins */
        }
    
        canvas.small-canvas {
            width: 20px;
            height: 20px;
        }
        .navbar .nav-link {
            margin-right: 10px;
            font-family: "Montserrat", sans-serif;
        }
          .navbar .nav-link:last-child {
            margin-right: 0;
          }

          body {
            font-family: "Montserrat", sans-serif;
          }
        
          p {
            font-family: "Montserrat", sans-serif;
          }
          
    </style>
    </head>
    <body>
    
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <a class="nav-link btn btn-dark" href="/">Accueil</a>
            <a class="nav-link btn btn-dark" href="/analyse">Analyse</a>
            <a class="nav-link btn btn-dark" href="/prediction">Prédiction</a>
        </nav>
        
    
    <h1>Analyse</h1>
    <div class="text-center">
        <label for="select-graph">Choisir un graphique:</label>
        <select id="select-graph">
            <option value="1">Nombre de messages</option>
            <option value="2">Répartition homme femme</option>
            <option value="21">Taux de réussite selon les genres</option>
            <option value="3">Nombre d'utilisateurs par pays</option>
            <option value="4">Pourcentage de réussite par pays</option>
            <option value="6">Répartition des utilisateurs selon leur niveau d'éducation</option>
            <option value="7">Pourcentage de réussite par niveau d'éducation</option>
        </select>
    </div>

    <div id="graph-container">
    
        <canvas id="{{ chart1_id }}" width="600" height="600" class="mx-auto small-canvas" style="margin-bottom: 20px; display:none;"></canvas>
        <canvas id="{{ chart2_id }}" width="600" height="600" class="mx-auto small-canvas" style="margin-bottom: 20px; display:none;"></canvas>
        <canvas id="{{ chart21_id }}" width="500" height="500" class="mx-auto small-canvas" style="margin-bottom: 20px; display:none;"></canvas>
        <canvas id="{{ chart3_id }}" width="500" height="500" class="mx-auto small-canvas" style="margin-bottom: 20px; display:none;"></canvas>
        <canvas id="{{ chart4_id }}" width="600" height="600" class="mx-auto small-canvas" style="margin-bottom: 20px; display:none;"></canvas>
        <canvas id="{{ chart6_id }}" width="500" height="500" class="mx-auto small-canvas" style="margin-bottom: 20px; display:none;"></canvas>
        <canvas id="{{ chart7_id }}" width="500" height="500" class="mx-auto small-canvas" style="margin-bottom: 20px; display:none;"></canvas>
    </div>
    <script>

        var dates = [
        "2014-02", "2014-03", "2014-04", "2014-05", "2014-06", "2014-07", "2014-08", "2014-09", "2014-10", "2014-11", "2014-12",
        "2015-01", "2015-02", "2015-03", "2015-04", "2015-05", "2015-07", "2015-08", "2015-09", "2015-10", "2015-11", "2015-12",
        "2016-01", "2016-02", "2016-03", "2016-04", "2016-05", "2016-06", "2016-07", "2016-08", "2016-09", "2016-10", "2016-11", "2016-12",
        "2017-01", "2017-02", "2017-03", "2017-04", "2017-05", "2017-06", "2017-07", "2017-08", "2017-09", "2017-10", "2017-11", "2017-12",
        "2018-01", "2018-02", "2018-03", "2018-04", "2018-05", "2018-06", "2018-07", "2018-08", "2018-09", "2018-10", "2018-11", "2018-12",
        "2019-01", "2019-02", "2019-03", "2019-04", "2019-05", "2019-06", "2019-07", "2019-08", "2019-09", "2019-10", "2019-11", "2019-12",
        "2020-01", "2020-02", "2020-03", "2020-04", "2020-05", "2020-06", "2020-07", "2020-08", "2020-09", "2020-10", "2020-11", "2020-12",
        "2021-01", "2021-02", "2021-03", "2021-04", "2021-05", "2021-06", "2021-07", "2021-08", "2021-09", "2021-10", "2021-11", "2021-12",
        "2022-01", "2022-02", "2022-03", "2022-04", "2022-05", "2022-06"
        ];
        var counts = [
        4484, 3307, 1429, 5419, 1785, 298, 5, 6, 451, 373, 98,
        576, 971, 679, 455, 14,103,5,6,12,705,517,490,440,322,4008,5804,9939,4772,3416,2624,2805,3345,2327,4513,9421,9742,6366,8696,6533,2547,1450,7336,16196,16894,8513,
        4150,1835,3233,5342,4816,5121,1747,50,1114,1813,3213,1247,4858,2105,1743,985,433,470,118,66,308,237,2374,1758,1456,434,375,1001,504,617,165,83,161,379,984,801,1507,
        1040,367,697,765,1142,272,11,61,118,127,63,419,92,33,75,138,58];

        var chartData = {{ data | tojson | safe }};


var chartObjects = [];
var canvasIds = ["{{ chart1_id }}", "{{ chart2_id }}", "{{ chart21_id }}", "{{ chart3_id }}", "{{ chart4_id }}", "{{ chart6_id }}", "{{ chart7_id }}"];

function hideAllGraphs() {
  for (var i = 0; i < canvasIds.length; i++) {
    var canvas = document.getElementById(canvasIds[i]);
    if (canvas) {
      canvas.style.display = 'none';
    }
  }
}

function showGraph(index) {
  hideAllGraphs();
  var canvas = document.getElementById(canvasIds[index]);
  if (canvas) {
    canvas.style.display = 'block';
    var chartData = chartData['graph' + index].data;
    var chartOptions = chartData['graph' + index].options;
    chartOptions.responsive = false;
    var ctx = canvas.getContext('2d');
    if (chartObjects[index]) {
      chartObjects[index].destroy();
    }
    chartObjects[index] = new Chart(ctx, {
      type: chartData.type,
      data: chartData,
      options: chartOptions
    });
  }
}

var selectGraph = document.getElementById('select-graph');
selectGraph.addEventListener('change', function() {
  var index = this.value;
  showGraph(index);
});

hideAllGraphs();


    </script>
    
    
</body>
</html>